services:
  snowflake-proxy:
    image: containers.torproject.org/tpo/anti-censorship/pluggable-transports/snowflake:latest
    container_name: snowflake-proxy
    restart: unless-stopped
    network_mode: host
    command: ["-verbose", "-metrics", "-metrics-address", "0.0.0.0", "-metrics-port", "9999"]

  stats-dashboard:
    image: nginx:alpine
    container_name: snowflake-stats
    restart: unless-stopped
    ports:
      - "8888:8888"
    volumes:
      - ./index.html:/usr/share/nginx/html/index.html:ro
      - ./nginx.conf:/etc/nginx/nginx.conf:ro
    depends_on:
      - snowflake-proxy
